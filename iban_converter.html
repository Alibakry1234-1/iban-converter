<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحويل رقم الحساب إلى آيبان</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            direction: rtl;
            text-align: center;
            background-color: #f5f5f5;
            padding: 20px;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: inline-block;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }
        input, button {
            font-size: 16px;
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            background-color: #008000;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #005700;
        }
        .iban-output {
            font-size: 18px;
            font-weight: bold;
            color: #004080;
        }
        .warning {
            color: red;
            font-size: 14px;
            margin-top: 10px;
        }
        .logo {
            max-width: 100px;
            margin: 10px auto;
        }
        .footer {
            font-size: 12px;
            margin-top: 15px;
            color: gray;
        }
    </style>
</head>
<body>

    <div class="container">
        <img src="file-J3sjzroFtYsy97m9MA8mp1" alt="شعار الريال السعودي" class="logo">
        
        <h2>تحويل رقم الحساب إلى رقم آيبان</h2>

        <label for="bankCode">اختر البنك:</label>
        <select id="bankCode">
            <option value="80">البنك الأهلي السعودي</option>
            <option value="10">بنك الرياض</option>
            <option value="20">بنك الجزيرة</option>
            <option value="30">البنك السعودي للاستثمار</option>
            <option value="40">البنك السعودي الفرنسي</option>
            <option value="50">ساب</option>
            <option value="60">البنك العربي الوطني</option>
            <option value="70">بنك البلاد</option>
            <option value="90">بنك الإنماء</option>
            <option value="85">مصرف الراجحي</option>
        </select>

        <label for="accountNumber">أدخل رقم الحساب (14 رقمًا):</label>
        <input type="text" id="accountNumber" placeholder="مثال: 12345678901234" maxlength="14">

        <button onclick="generateIBAN()">تحويل إلى آيبان</button>

        <p class="iban-output" id="ibanOutput"></p>
        <button id="copyButton" style="display: none;" onclick="copyIBAN()">نسخ الآيبان</button>

        <p class="warning">⚠️ الرجاء التأكد من اسم المستلم قبل إتمام الحوالة.</p>
        <p class="footer">جميع الحقوق محفوظة للمبرمج: علي عبدالله بكري</p>
    </div>

    <script>
        function generateIBAN() {
            let bankCode = document.getElementById("bankCode").value;
            let accountNumber = document.getElementById("accountNumber").value.trim();
            let ibanOutput = document.getElementById("ibanOutput");
            let copyButton = document.getElementById("copyButton");

            // تحقق من طول الحساب
            if (accountNumber.length !== 14 || isNaN(accountNumber)) {
                ibanOutput.innerHTML = "❌ رقم الحساب غير صالح. يجب أن يكون 14 رقمًا.";
                ibanOutput.style.color = "red";
                copyButton.style.display = "none";
                return;
            }

            // إنشاء رقم الآيبان
            let countryCode = "SA"; // رمز السعودية
            let checkDigits = "00"; // يتم احتسابه لاحقًا ولكن نتركه 00 مؤقتًا
            let iban = countryCode + checkDigits + bankCode + accountNumber;

            // تحويل الحروف إلى أرقام حسب معايير IBAN
            let numericIBAN = iban.replace(/[A-Z]/g, function (match) {
                return match.charCodeAt(0) - 55;
            });

            // حساب رقم التحقق (Check Digits)
            let mod97 = BigInt(numericIBAN) % 97n;
            let checkDigitsFinal = (98n - mod97).toString().padStart(2, '0');

            // الرقم النهائي
            let finalIBAN = countryCode + checkDigitsFinal + bankCode + accountNumber;

            // عرض النتيجة
            ibanOutput.innerHTML = "✅ رقم الآيبان: " + finalIBAN;
            ibanOutput.style.color = "#004080";
            copyButton.style.display = "inline-block";
        }

        function copyIBAN() {
            let ibanOutput = document.getElementById("ibanOutput").innerText.replace("✅ رقم الآيبان: ", "");
            navigator.clipboard.writeText(ibanOutput).then(() => {
                alert("تم نسخ رقم الآيبان!");
            }).catch(err => {
                console.error("فشل النسخ:", err);
            });
        }
    </script>

</body>
</html>
